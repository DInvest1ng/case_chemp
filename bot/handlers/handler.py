from aiogram.filters import CommandStart
from aiogram.types import Message
from aiogram import F, Router
from . import keyboards as kb
from bert import SentimentAnalyzer


router = Router()
analyzer = SentimentAnalyzer()


@router.message(CommandStart())
async def cmd_start(message: Message):
    await message.answer(
        f"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, —É–≤–∞–∂–∞–µ–º—ã–µ —á–ª–µ–Ω—ã –∂—é—Ä–∏. –í–∞—Å –ø—Ä–∏–≤–µ—Ç—Å–≤—É—Ç–µ –∫–æ–º–∞–Ω–¥–∞ '–ö–æ—Ñ–µ, –ö–æ–ª–∞, MVP', –Ω–æ–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã 1979. –° —á–µ–º –±—ã –≤—ã —Ö–æ—Ç–µ–ª–∏ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—Å—è?",
        reply_markup=kb.main_keyboard,
    )


@router.message(F.text == "–§–∏–Ω–∞–Ω—Å—ã üí∞")
async def finances(message: Message):
    await message.answer(
        f"–û–∑–Ω–∞–∫–æ–º–∏—Ç—Å—è —Å —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ https://docs.google.com/spreadsheets/d/1JvBXwL3f5_X-j_O8IeRddz9zy9e5fvzhys3Ra7kTPaA/edit?gid=0#gid=0",
        reply_markup=kb.back_keyboard,
    )


@router.message(F.text == "–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã üí°")
async def show_initiatives(message: Message):
    await message.answer(
        "–ù–∞—à–∏ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ fidgital-–æ—Ñ–∏—Å–∞ –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞ –≤ –î–∑–µ—Ä–∂–∏–Ω—Å–∫–µ:\n\n"
        "–ê–≤—Ç–æ–º–∞—Ç –≤—ã–¥–∞—á–∏ –∫–∞—Ä—Ç\n"
        "–ó–∞–±–∏—Ä–∞–π —Å–≤–æ—é –¥–µ–±–µ—Ç–æ–≤—É—é –∫–∞—Ä—Ç—É –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è ‚Äî –±–µ–∑ –æ—á–µ—Ä–µ–¥–µ–π –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤. "
        "–ü—Ä–æ—Å—Ç–æ –ø–æ–¥–∞–π –∑–∞—è–≤–∫—É –æ–Ω–ª–∞–π–Ω –∏ –ø–æ–ª—É—á–∏ –∫–∞—Ä—Ç—É –ø–æ QR-–∫–æ–¥—É –∏–∑ –∞–≤—Ç–æ–º–∞—Ç–∞.\n\n"
        "–ü–µ—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\n"
        "–ü–æ–∫–∞ —Å—Ç–æ–∏—à—å –≤ –æ—á–µ—Ä–µ–¥–∏ ‚Äî –∑–∞–ø–æ–ª–Ω—è–π –∏ –ø–µ—á–∞—Ç–∞–π –Ω—É–∂–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø—Ä—è–º–æ –≤ –æ—Ñ–∏—Å–µ. "
        "–≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –Ω–∞ 33% –∏ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —É–¥–æ–±–Ω–µ–µ.\n\n"
        "–£–º–Ω—ã–π –ø–æ–¥–±–æ—Ä –º–µ–Ω–µ–¥–∂–µ—Ä–∞\n"
        "–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–≤–æ–π –æ–ø—ã—Ç –æ–±—â–µ–Ω–∏—è —Å –±–∞–Ω–∫–æ–º –∏ –ø–æ–¥–±–∏—Ä–∞–µ—Ç —Ç–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞, "
        "–∫–æ—Ç–æ—Ä—ã–π –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ä–µ—à–∏—Ç —Ç–≤–æ—é –∑–∞–¥–∞—á—É ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ –∏ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤.\n\n"
        "–ü–ª—é—Å: –∫–æ—Ñ–µ –≤ –∑–æ–Ω–µ –æ–∂–∏–¥–∞–Ω–∏—è –∏ –¥–µ—Ç—Å–∫–∏–π —É–≥–æ–ª–æ–∫ –¥–ª—è —Å–µ–º–µ–π —Å –¥–µ—Ç—å–º–∏ ‚òïüë∂",
        reply_markup=kb.back_keyboard,
    )


@router.message(F.text == "–û –∫–æ–º–∞–Ω–¥–µ üë•")
async def initiative3(message: Message):
    await message.answer(
        (
            "–ò—Å—Ç–æ–º–∏–Ω –î–∞–Ω–∏–∏–ª - —Ñ–∏–Ω–∞–ª–∏—Å—Ç –≤—Å–µ—Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –∫–µ–π—Å —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞ –æ—Ç –ù–ò–£ –í–®–≠, "
            "—Ñ–∏–Ω–∞–ª–∏—Å—Ç –∫–µ–π—Å —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞ Deadline\n\n"
            "–ê–Ω—Ü–∏—Ñ–∏—Ä–æ–≤ –ï–≤–≥–µ–Ω–∏–π - –ø—Ä–∏–∑–µ—Ä –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —ç—Ç–∞–ø–∞ –í–°–û–® –ø–æ –û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏—é, "
            "–ø—Ä–∏–∑–µ—Ä 3 —Å—Ç–µ–ø–µ–Ω—å –í–ü –ø–æ —ç–∫–æ–Ω–æ–º–∏–∫–µ\n\n"
            "–ö—É–ª—å–±–∞–∫–æ–≤ –ú–∞—Ç–≤–µ–π - –ø—Ä–∏–∑–µ—Ä –æ–ª–∏–º–ø–∏–∞–¥—ã –†–ê–ì–≥–•–ò–° –ø–æ —Å–æ—Ü–∏–æ–ª–æ–≥–∏–∏"
        ),
        reply_markup=kb.back_keyboard,
    )


@router.message(F.text == "–ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ 3 üöÄ")
async def initiative3(message: Message):
    await message.answer(
        f"–ù–∞–ø–∏—à–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –∏ —è –ø–æ–¥–±–µ—Ä—É –¥–ª—è –≤–∞—Å –º–µ–Ω–µ–¥–∂–µ—Ä–∞.",
        reply_markup=kb.back_keyboard,
    )


@router.message(F.text == "‚è™ –ù–∞–∑–∞–¥")
async def go_back(message: Message):
    await message.answer(
        f"–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é. –° —á–µ–º –±—ã –≤—ã —Ö–æ—Ç–µ–ª–∏ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—Å—è?",
        reply_markup=kb.main_keyboard,
    )


@router.message()
async def select_manager(message: Message):
    mgr = analyzer.manager_selecting(message.text)
    if mgr:
        name = mgr.get("name", "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä")
        department = mgr.get("department", "–Ω–µ—Ç –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞")
        await message.answer(
            f"–í–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç –º–µ–Ω–µ–¥–∂–µ—Ä: {name}\n–î–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç: {department}",
            reply_markup=kb.back_keyboard,
        )
